import 'dart:async';
import 'dart:convert';

import 'package:fingraph/model/asset.dart';
import 'package:fingraph/model/dimension.dart';
import 'package:fingraph/model/src_api.dart';
import 'package:fingraph/model/tick.dart';
import 'package:fingraph/model/wsmsg.dart';
import 'package:fingraph/utils/const.dart';

class TestData<T extends Dimension> extends SrcApi {

  TestData() {
    print("* testdata()");
  }

  DateTime _dt = DateTime.now();
  StreamSubscription<dynamic> _sub;

  Stream<String> _dimensionStream(DateTime dt) async* {
    WsMsg msg;
    try {
      for(var i=0; i < kMaxLenData; i++) {
        await Future.delayed(Dimension.addDt);

          // TODO just for Tick. We need to add handling for OHLC..
          Tick tick =  Tick().getRandom(dt);
          dt = tick.d;
          msg = WsMsg(jsonrpc: 2, method: "q", params: tick); //json.encode(tick.toJson()));
          // ----------------

        //print("* testdata.dataStream: ${msg.toString()}");
        yield json.encode(msg.toJson());
      }
    } catch (e) {
      print("* _tickStream.error: ${e.toString()}");
    }
  }

  @override
  bool start(String symbol, OnData onData, {OnError onError}) {
    bool res = false;
    print("* testdata.start");
    ;
    try {
      final Stream<String> stream = _dimensionStream(_dt);
      if(_sub != null) _sub.cancel();
      _sub = stream.listen(onData, onError: onError ?? _onError, onDone: _onDone);
      res = true;
    } catch (e) {
      print("* testdata.catch error: ${e.toString()}");
    }
    return res;
  }
  //void _testData(dynamic msg) => print("* testdata.onData: $msg");
  void _onError(Object error) => print("* testdata._onError: $error");

  void _onDone() {
    _sub?.cancel();
    print("* testdata._onDone");
  }

  @override
  void stop() {
    _sub?.cancel();
    print("* testdata.stop");
  }

  @override
  Future<List<Asset>> getAssets() async {
    List<Asset> assets = [];
    String jsonString = '[{"id":151,"rate":0.75,"rate_longer_5m":0.77,"available":true,"session_start_time":"2021-05-28T06:00:00Z","session_end_time":"2021-05-28T18:30:00Z","next_session_start_time":"2021-05-31T05:00:00Z","symbol":"EUR/GBP:AFX","SessionSource":"parser","RateSource":"parser","enabled":true,"category":"Forex","deals_opening_allowed":true,"friendly_name":"EUR/GBP","is_otc":false,"sparkline":null},{"id":299,"rate":0.55,"rate_longer_5m":0.44,"available":false,"session_start_time":"2021-05-28T19:00:00Z","session_end_time":"2021-05-31T06:00:00Z","next_session_start_time":"2021-05-28T19:00:00Z","symbol":"GBP/JPY:OTC","SessionSource":"inverted_parent","RateSource":"manual","enabled":false,"category":"Forex","deals_opening_allowed":false,"friendly_name":"GBP/JPY:OTC","is_otc":true,"sparkline":null},{"id":300,"rate":0,"rate_longer_5m":0,"available":false,"session_start_time":"0001-01-01T00:00:00Z","session_end_time":"0001-01-01T00:00:00Z","next_session_start_time":"0001-01-01T00:00:00Z","symbol":"USD/PLN:OTC","SessionSource":"inverted_parent","RateSource":"manual","enabled":false,"category":"Forex","deals_opening_allowed":false,"friendly_name":"USD/PLN:OTC","is_otc":true,"sparkline":null},{"id":301,"rate":0.55,"rate_longer_5m":0.44,"available":false,"session_start_time":"2021-05-28T18:30:00Z","session_end_time":"2021-05-31T00:00:00Z","next_session_start_time":"2021-05-28T18:30:00Z","symbol":"AUD/JPY:OTC","SessionSource":"inverted_parent","RateSource":"manual","enabled":false,"category":"Forex","deals_opening_allowed":false,"friendly_name":"AUD/JPY:OTC","is_otc":true,"sparkline":null},{"id":302,"rate":0.55,"rate_longer_5m":0.44,"available":false,"session_start_time":"2021-05-28T18:00:00Z","session_end_time":"2021-05-31T04:00:00Z","next_session_start_time":"2021-05-28T18:00:00Z","symbol":"USD/NOK:OTC","SessionSource":"inverted_parent","RateSource":"manual","enabled":false,"category":"Forex","deals_opening_allowed":false,"friendly_name":"USD/NOK:OTC","is_otc":true,"sparkline":null},{"id":303,"rate":0.55,"rate_longer_5m":0.44,"available":false,"session_start_time":"2021-05-28T05:50:00Z","session_end_time":"2021-05-31T06:00:00Z","next_session_start_time":"2021-05-28T15:00:00Z","symbol":"CHF/JPY:OTC","SessionSource":"inverted_parent","RateSource":"manual","enabled":false,"category":"Forex","deals_opening_allowed":false,"friendly_name":"CHF/JPY:OTC","is_otc":true,"sparkline":null},{"id":304,"rate":0,"rate_longer_5m":0,"available":false,"session_start_time":"0001-01-01T00:00:00Z","session_end_time":"0001-01-01T00:00:00Z","next_session_start_time":"0001-01-01T00:00:00Z","symbol":"USD/BRL:OTC","SessionSource":"inverted_parent","RateSource":"manual","enabled":false,"category":"Forex","deals_opening_allowed":false,"friendly_name":"USD/BRL:OTC","is_otc":true,"sparkline":null},{"id":305,"rate":0.55,"rate_longer_5m":0.44,"available":false,"session_start_time":"2021-05-28T18:30:00Z","session_end_time":"2021-05-31T05:00:00Z","next_session_start_time":"2021-05-28T18:30:00Z","symbol":"CAD/CHF:OTC","SessionSource":"inverted_parent","RateSource":"manual","enabled":false,"category":"Forex","deals_opening_allowed":false,"friendly_name":"CAD/CHF:OTC","is_otc":true,"sparkline":null},{"id":23,"rate":0,"rate_longer_5m":0,"available":false,"session_start_time":"2021-05-28T20:00:00Z","session_end_time":"2021-05-30T23:59:00Z","next_session_start_time":"2021-05-28T20:00:00Z","symbol":"EUR/USD:OTC","SessionSource":"manual","RateSource":"parser","enabled":true,"category":"Forex","deals_opening_allowed":true,"friendly_name":"EUR/USD:OTC","is_otc":true,"sparkline":null},{"id":29,"rate":0,"rate_longer_5m":0,"available":false,"session_start_time":"2021-05-28T18:30:00Z","session_end_time":"2021-05-30T23:55:00Z","next_session_start_time":"2021-05-28T18:30:00Z","symbol":"USD/CHF:OTC","SessionSource":"parser","RateSource":"parser","enabled":true,"category":"Forex","deals_opening_allowed":true,"friendly_name":"USD/CHF:OTC","is_otc":true,"sparkline":null},{"id":318,"rate":0,"rate_longer_5m":0,"available":false,"session_start_time":"2021-05-28T13:33:00Z","session_end_time":"2021-05-28T18:30:00Z","next_session_start_time":"2021-05-28T13:33:00Z","symbol":"YNDX","SessionSource":"parser","RateSource":"parser","enabled":true,"category":"STOCKS","deals_opening_allowed":true,"friendly_name":"YNDX","is_otc":false,"sparkline":null},{"id":319,"rate":0,"rate_longer_5m":0,"available":false,"session_start_time":"2021-05-28T13:33:00Z","session_end_time":"2021-05-28T18:30:00Z","next_session_start_time":"2021-05-28T13:33:00Z","symbol":"BIDU:BFX","SessionSource":"parser","RateSource":"parser","enabled":true,"category":"STOCKS","deals_opening_allowed":true,"friendly_name":"BIDU:BFX","is_otc":false,"sparkline":null},{"id":320,"rate":0,"rate_longer_5m":0,"available":false,"session_start_time":"2021-05-28T13:33:00Z","session_end_time":"2021-05-28T18:30:00Z","next_session_start_time":"2021-05-28T13:33:00Z","symbol":"MCD:BFX","SessionSource":"parser","RateSource":"parser","enabled":true,"category":"STOCKS","deals_opening_allowed":true,"friendly_name":"MCD:BFX","is_otc":false,"sparkline":null},{"id":321,"rate":0,"rate_longer_5m":0,"available":false,"session_start_time":"2021-05-28T13:33:00Z","session_end_time":"2021-05-28T18:30:00Z","next_session_start_time":"2021-05-28T13:33:00Z","symbol":"C:BFX","SessionSource":"parser","RateSource":"parser","enabled":true,"category":"STOCKS","deals_opening_allowed":true,"friendly_name":"C:BFX","is_otc":false,"sparkline":null},{"id":322,"rate":0,"rate_longer_5m":0,"available":false,"session_start_time":"2021-05-28T13:33:00Z","session_end_time":"2021-05-28T18:30:00Z","next_session_start_time":"2021-05-28T13:33:00Z","symbol":"MSFT:BFX","SessionSource":"parser","RateSource":"parser","enabled":true,"category":"STOCKS","deals_opening_allowed":true,"friendly_name":"MSFT:BFX","is_otc":false,"sparkline":null},{"id":323,"rate":0,"rate_longer_5m":0,"available":false,"session_start_time":"2021-05-28T13:33:00Z","session_end_time":"2021-05-28T18:30:00Z","next_session_start_time":"2021-05-28T13:33:00Z","symbol":"BABA:BFX","SessionSource":"parser","RateSource":"parser","enabled":true,"category":"STOCKS","deals_opening_allowed":true,"friendly_name":"BABA:BFX","is_otc":false,"sparkline":null},{"id":324,"rate":0,"rate_longer_5m":0,"available":false,"session_start_time":"2021-05-28T13:33:00Z","session_end_time":"2021-05-28T18:30:00Z","next_session_start_time":"2021-05-28T13:33:00Z","symbol":"AMZN:BFX","SessionSource":"parser","RateSource":"parser","enabled":true,"category":"STOCKS","deals_opening_allowed":true,"friendly_name":"AMZN:BFX","is_otc":false,"sparkline":null},{"id":325,"rate":0,"rate_longer_5m":0,"available":false,"session_start_time":"2021-05-28T13:33:00Z","session_end_time":"2021-05-28T18:30:00Z","next_session_start_time":"2021-05-28T13:33:00Z","symbol":"TSLA:BFX","SessionSource":"parser","RateSource":"parser","enabled":true,"category":"STOCKS","deals_opening_allowed":true,"friendly_name":"TSLA:BFX","is_otc":false,"sparkline":null},{"id":326,"rate":0,"rate_longer_5m":0,"available":false,"session_start_time":"2021-05-28T13:33:00Z","session_end_time":"2021-05-28T18:30:00Z","next_session_start_time":"2021-05-28T13:33:00Z","symbol":"JPM:BFX","SessionSource":"parser","RateSource":"parser","enabled":true,"category":"STOCKS","deals_opening_allowed":true,"friendly_name":"JPM:BFX","is_otc":false,"sparkline":null},{"id":327,"rate":0,"rate_longer_5m":0,"available":false,"session_start_time":"2021-05-28T13:33:00Z","session_end_time":"2021-05-28T18:30:00Z","next_session_start_time":"2021-05-28T13:33:00Z","symbol":"INTC:BFX","SessionSource":"parser","RateSource":"parser","enabled":true,"category":"STOCKS","deals_opening_allowed":true,"friendly_name":"INTC:BFX","is_otc":false,"sparkline":null},{"id":328,"rate":0,"rate_longer_5m":0,"available":false,"session_start_time":"2021-05-28T13:33:00Z","session_end_time":"2021-05-28T18:30:00Z","next_session_start_time":"2021-05-28T13:33:00Z","symbol":"FB:BFX","SessionSource":"parser","RateSource":"parser","enabled":true,"category":"STOCKS","deals_opening_allowed":true,"friendly_name":"FB:BFX","is_otc":false,"sparkline":null},{"id":329,"rate":0,"rate_longer_5m":0,"available":false,"session_start_time":"2021-05-28T13:33:00Z","session_end_time":"2021-05-28T18:30:00Z","next_session_start_time":"2021-05-28T13:33:00Z","symbol":"AAPL:BFX","SessionSource":"parser","RateSource":"parser","enabled":true,"category":"STOCKS","deals_opening_allowed":true,"friendly_name":"AAPL:BFX","is_otc":false,"sparkline":null},{"id":330,"rate":0,"rate_longer_5m":0,"available":false,"session_start_time":"2021-05-28T13:33:00Z","session_end_time":"2021-05-28T18:30:00Z","next_session_start_time":"2021-05-28T13:33:00Z","symbol":"GOOG:BFX","SessionSource":"parser","RateSource":"parser","enabled":true,"category":"STOCKS","deals_opening_allowed":true,"friendly_name":"GOOG:BFX","is_otc":false,"sparkline":null},{"id":331,"rate":0,"rate_longer_5m":0,"available":false,"session_start_time":"2021-05-28T13:33:00Z","session_end_time":"2021-05-28T18:30:00Z","next_session_start_time":"2021-05-28T13:33:00Z","symbol":"MS:BFX","SessionSource":"parser","RateSource":"parser","enabled":true,"category":"STOCKS","deals_opening_allowed":true,"friendly_name":"MS:BFX","is_otc":false,"sparkline":null},{"id":332,"rate":0,"rate_longer_5m":0,"available":false,"session_start_time":"2021-05-28T13:33:00Z","session_end_time":"2021-05-28T18:30:00Z","next_session_start_time":"2021-05-28T13:33:00Z","symbol":"NKE:BFX","SessionSource":"parser","RateSource":"parser","enabled":true,"category":"STOCKS","deals_opening_allowed":true,"friendly_name":"NKE:BFX","is_otc":false,"sparkline":null},{"id":333,"rate":0,"rate_longer_5m":0,"available":false,"session_start_time":"2021-05-28T13:33:00Z","session_end_time":"2021-05-28T18:30:00Z","next_session_start_time":"2021-05-28T13:33:00Z","symbol":"KO:BFX","SessionSource":"parser","RateSource":"parser","enabled":true,"category":"STOCKS","deals_opening_allowed":true,"friendly_name":"KO:BFX","is_otc":false,"sparkline":null},{"id":334,"rate":0,"rate_longer_5m":0,"available":false,"session_start_time":"2021-05-28T13:33:00Z","session_end_time":"2021-05-28T18:30:00Z","next_session_start_time":"2021-05-28T13:33:00Z","symbol":"GS:BFX","SessionSource":"parser","RateSource":"parser","enabled":true,"category":"STOCKS","deals_opening_allowed":true,"friendly_name":"GS:BFX","is_otc":false,"sparkline":null},{"id":113,"rate":0,"rate_longer_5m":0.77,"available":true,"session_start_time":"2021-05-28T06:00:00Z","session_end_time":"2021-05-28T18:30:00Z","next_session_start_time":"2021-05-31T05:00:00Z","symbol":"GBP/CAD:AFX","SessionSource":"parser","RateSource":"parser","enabled":true,"category":"Forex","deals_opening_allowed":true,"friendly_name":"GBP/CAD","is_otc":false,"sparkline":null},{"id":306,"rate":0.55,"rate_longer_5m":0.44,"available":false,"session_start_time":"2021-05-28T18:30:00Z","session_end_time":"2021-05-31T06:00:00Z","next_session_start_time":"2021-05-28T18:30:00Z","symbol":"CAD/JPY:OTC","SessionSource":"inverted_parent","RateSource":"manual","enabled":false,"category":"Forex","deals_opening_allowed":false,"friendly_name":"CAD/JPY:OTC","is_otc":true,"sparkline":null},{"id":307,"rate":0.55,"rate_longer_5m":0.44,"available":false,"session_start_time":"2021-05-28T18:30:00Z","session_end_time":"2021-05-31T05:00:00Z","next_session_start_time":"2021-05-28T18:30:00Z","symbol":"EUR/GBP:OTC","SessionSource":"inverted_parent","RateSource":"manual","enabled":false,"category":"Forex","deals_opening_allowed":false,"friendly_name":"EUR/GBP:OTC","is_otc":true,"sparkline":null},{"id":308,"rate":0.55,"rate_longer_5m":0.44,"available":false,"session_start_time":"2021-05-28T18:30:00Z","session_end_time":"2021-05-31T00:00:00Z","next_session_start_time":"2021-05-28T18:30:00Z","symbol":"NZD/USD:OTC","SessionSource":"inverted_parent","RateSource":"manual","enabled":false,"category":"Forex","deals_opening_allowed":false,"friendly_name":"NZD/USD:OTC","is_otc":true,"sparkline":null},{"id":309,"rate":0.55,"rate_longer_5m":0.44,"available":false,"session_start_time":"2021-05-28T18:30:00Z","session_end_time":"2021-05-31T05:00:00Z","next_session_start_time":"2021-05-28T18:30:00Z","symbol":"GBP/CAD:OTC","SessionSource":"inverted_parent","RateSource":"manual","enabled":false,"category":"Forex","deals_opening_allowed":false,"friendly_name":"GBP/CAD:OTC","is_otc":true,"sparkline":null},{"id":310,"rate":0.55,"rate_longer_5m":0.44,"available":false,"session_start_time":"2021-05-27T18:00:00Z","session_end_time":"2021-05-28T07:00:00Z","next_session_start_time":"2021-05-28T18:00:00Z","symbol":"AUD/CAD:OTC","SessionSource":"inverted_parent","RateSource":"manual","enabled":false,"category":"Forex","deals_opening_allowed":false,"friendly_name":"AUD/CAD:OTC","is_otc":true,"sparkline":null},{"id":311,"rate":0.55,"rate_longer_5m":0.44,"available":false,"session_start_time":"2021-05-28T18:30:00Z","session_end_time":"2021-05-31T04:00:00Z","next_session_start_time":"2021-05-28T18:30:00Z","symbol":"GBP/NZD:OTC","SessionSource":"inverted_parent","RateSource":"manual","enabled":false,"category":"Forex","deals_opening_allowed":false,"friendly_name":"GBP/NZD:OTC","is_otc":true,"sparkline":null},{"id":312,"rate":0.55,"rate_longer_5m":0.44,"available":false,"session_start_time":"2021-05-28T18:00:00Z","session_end_time":"2021-05-31T05:00:00Z","next_session_start_time":"2021-05-28T18:00:00Z","symbol":"GBP/CHF:OTC","SessionSource":"inverted_parent","RateSource":"manual","enabled":false,"category":"Forex","deals_opening_allowed":false,"friendly_name":"GBP/CAD:OTC","is_otc":true,"sparkline":null},{"id":313,"rate":0.55,"rate_longer_5m":0.44,"available":false,"session_start_time":"2021-05-28T18:00:00Z","session_end_time":"2021-05-31T04:00:00Z","next_session_start_time":"2021-05-28T18:00:00Z","symbol":"AUD/CHF:OTC","SessionSource":"inverted_parent","RateSource":"manual","enabled":false,"category":"Forex","deals_opening_allowed":false,"friendly_name":"AUD/CHF:OTC","is_otc":true,"sparkline":null},{"id":314,"rate":0,"rate_longer_5m":0,"available":false,"session_start_time":"0001-01-01T00:00:00Z","session_end_time":"0001-01-01T00:00:00Z","next_session_start_time":"0001-01-01T00:00:00Z","symbol":"USD/TRY:OTC","SessionSource":"inverted_parent","RateSource":"manual","enabled":false,"category":"Forex","deals_opening_allowed":false,"friendly_name":"USD/TRY:OTC","is_otc":true,"sparkline":null},{"id":286,"rate":0,"rate_longer_5m":0,"available":false,"session_start_time":"2021-05-28T13:33:00Z","session_end_time":"2021-05-28T18:30:00Z","next_session_start_time":"2021-05-28T13:33:00Z","symbol":"GS","SessionSource":"parser","RateSource":"parser","enabled":true,"category":"Stocks","deals_opening_allowed":true,"friendly_name":"Goldman Sachs","is_otc":false,"sparkline":null},{"id":315,"rate":0.55,"rate_longer_5m":0.44,"available":false,"session_start_time":"2021-05-28T18:00:00Z","session_end_time":"2021-05-31T04:00:00Z","next_session_start_time":"2021-05-28T18:00:00Z","symbol":"AUD/NZD:OTC","SessionSource":"inverted_parent","RateSource":"manual","enabled":false,"category":"Forex","deals_opening_allowed":false,"friendly_name":"AUD/NZD:OTC","is_otc":true,"sparkline":null},{"id":209,"rate":0,"rate_longer_5m":0,"available":false,"session_start_time":"0001-01-01T00:00:00Z","session_end_time":"0001-01-01T00:00:00Z","next_session_start_time":"0001-01-01T00:00:00Z","symbol":"USD/TRY:AFX","SessionSource":"parser","RateSource":"parser","enabled":true,"category":"Forex","deals_opening_allowed":true,"friendly_name":"USD/TRY","is_otc":false,"sparkline":null},{"id":316,"rate":0,"rate_longer_5m":0,"available":false,"session_start_time":"0001-01-01T00:00:00Z","session_end_time":"0001-01-01T00:00:00Z","next_session_start_time":"0001-01-01T00:00:00Z","symbol":"USD/SGD:OTC","SessionSource":"inverted_parent","RateSource":"manual","enabled":false,"category":"Forex","deals_opening_allowed":false,"friendly_name":"USD/SGD:OTC","is_otc":true,"sparkline":null},{"id":190,"rate":0,"rate_longer_5m":0,"available":false,"session_start_time":"2021-05-28T06:00:00Z","session_end_time":"2021-05-28T18:30:00Z","next_session_start_time":"2021-05-31T06:00:00Z","symbol":"CAD/JPY:AFX","SessionSource":"parser","RateSource":"parser","enabled":true,"category":"Forex","deals_opening_allowed":true,"friendly_name":"CAD/JPY","is_otc":false,"sparkline":null},{"id":317,"rate":0.55,"rate_longer_5m":0.44,"available":false,"session_start_time":"2021-05-28T18:30:00Z","session_end_time":"2021-05-31T05:00:00Z","next_session_start_time":"2021-05-28T18:30:00Z","symbol":"GBP/AUD:OTC","SessionSource":"inverted_parent","RateSource":"manual","enabled":false,"category":"Forex","deals_opening_allowed":false,"friendly_name":"GBP/AUD:OTC","is_otc":true,"sparkline":null},{"id":30,"rate":0,"rate_longer_5m":0,"available":false,"session_start_time":"2021-05-25T16:14:00Z","session_end_time":"2021-05-25T18:55:00Z","next_session_start_time":"2021-06-01T15:25:00Z","symbol":"USD/JPY:OTC","SessionSource":"parser","RateSource":"parser","enabled":true,"category":"Forex","deals_opening_allowed":true,"friendly_name":"USD/JPY:OTC","is_otc":true,"sparkline":null},{"id":24,"rate":0,"rate_longer_5m":0,"available":false,"session_start_time":"2021-05-28T18:30:00Z","session_end_time":"2021-05-30T23:55:00Z","next_session_start_time":"2021-05-28T18:30:00Z","symbol":"AUD/USD:OTC","SessionSource":"parser","RateSource":"parser","enabled":true,"category":"Forex","deals_opening_allowed":true,"friendly_name":"AUD/USD:OTC","is_otc":true,"sparkline":null},{"id":253,"rate":0,"rate_longer_5m":0,"available":false,"session_start_time":"2021-05-28T06:00:00Z","session_end_time":"2021-05-28T15:00:00Z","next_session_start_time":"2021-05-31T06:00:00Z","symbol":"CHF/JPY:AFX","SessionSource":"parser","RateSource":"parser","enabled":true,"category":"Forex","deals_opening_allowed":true,"friendly_name":"CHF/JPY","is_otc":false,"sparkline":null},{"id":162,"rate":0,"rate_longer_5m":0,"available":false,"session_start_time":"0001-01-01T00:00:00Z","session_end_time":"0001-01-01T00:00:00Z","next_session_start_time":"0001-01-01T00:00:00Z","symbol":"USD/SGD:AFX","SessionSource":"parser","RateSource":"parser","enabled":true,"category":"Forex","deals_opening_allowed":true,"friendly_name":"USD/SGD","is_otc":false,"sparkline":null},{"id":25,"rate":0,"rate_longer_5m":0,"available":false,"session_start_time":"2021-05-25T16:14:00Z","session_end_time":"2021-05-25T18:55:00Z","next_session_start_time":"2021-06-01T15:25:00Z","symbol":"EUR/CHF:OTC","SessionSource":"parser","RateSource":"parser","enabled":false,"category":"Forex","deals_opening_allowed":true,"friendly_name":"EUR/CHF:OTC","is_otc":true,"sparkline":null},{"id":278,"rate":0,"rate_longer_5m":0,"available":false,"session_start_time":"2021-05-25T16:14:00Z","session_end_time":"2021-05-25T18:55:00Z","next_session_start_time":"2021-06-01T15:25:00Z","symbol":"CO1.COM:TEI","SessionSource":"parser","RateSource":"parser","enabled":false,"category":"Commodities","deals_opening_allowed":true,"friendly_name":"Brent Oil","is_otc":false,"sparkline":null},{"id":280,"rate":0,"rate_longer_5m":0,"available":false,"session_start_time":"2021-05-25T16:14:00Z","session_end_time":"2021-05-25T18:55:00Z","next_session_start_time":"2021-06-01T15:25:00Z","symbol":"XAGUSD.CUR:TEI","SessionSource":"parser","RateSource":"parser","enabled":false,"category":"Commodities","deals_opening_allowed":true,"friendly_name":"Silver","is_otc":false,"sparkline":null},{"id":271,"rate":0,"rate_longer_5m":0,"available":false,"session_start_time":"2021-05-25T16:14:00Z","session_end_time":"2021-05-25T18:55:00Z","next_session_start_time":"2021-06-01T15:25:00Z","symbol":"XAUUSD.CUR:TEI","SessionSource":"parser","RateSource":"parser","enabled":false,"category":"Commodities","deals_opening_allowed":true,"friendly_name":"Gold","is_otc":false,"sparkline":null},{"id":26,"rate":0,"rate_longer_5m":0,"available":false,"session_start_time":"2021-05-28T18:30:00Z","session_end_time":"2021-05-30T23:55:00Z","next_session_start_time":"2021-05-28T18:30:00Z","symbol":"EUR/JPY:OTC","SessionSource":"parser","RateSource":"parser","enabled":true,"category":"Forex","deals_opening_allowed":true,"friendly_name":"EUR/JPY:OTC","is_otc":true,"sparkline":null},{"id":187,"rate":0,"rate_longer_5m":0,"available":false,"session_start_time":"0001-01-01T00:00:00Z","session_end_time":"0001-01-01T00:00:00Z","next_session_start_time":"0001-01-01T00:00:00Z","symbol":"USD/PLN:AFX","SessionSource":"parser","RateSource":"parser","enabled":true,"category":"Forex","deals_opening_allowed":true,"friendly_name":"USD/PLN","is_otc":false,"sparkline":null},{"id":179,"rate":0,"rate_longer_5m":0,"available":false,"session_start_time":"2021-05-28T06:00:00Z","session_end_time":"2021-05-28T19:00:00Z","next_session_start_time":"2021-05-31T06:00:00Z","symbol":"GBP/JPY:AFX","SessionSource":"parser","RateSource":"parser","enabled":true,"category":"Forex","deals_opening_allowed":true,"friendly_name":"GBP/JPY","is_otc":false,"sparkline":null},{"id":279,"rate":0,"rate_longer_5m":0,"available":false,"session_start_time":"2021-05-25T16:14:00Z","session_end_time":"2021-05-25T18:55:00Z","next_session_start_time":"2021-06-01T15:25:00Z","symbol":"CL1.COM:TEI","SessionSource":"parser","RateSource":"parser","enabled":false,"category":"Commodities","deals_opening_allowed":true,"friendly_name":"Crude Oil","is_otc":false,"sparkline":null},{"id":201,"rate":0,"rate_longer_5m":0.78,"available":true,"session_start_time":"2021-05-28T06:00:00Z","session_end_time":"2021-05-28T18:00:00Z","next_session_start_time":"2021-05-31T04:00:00Z","symbol":"AUD/NZD:AFX","SessionSource":"parser","RateSource":"parser","enabled":true,"category":"Forex","deals_opening_allowed":true,"friendly_name":"AUD/NZD","is_otc":false,"sparkline":null},{"id":249,"rate":0,"rate_longer_5m":0.77,"available":true,"session_start_time":"2021-05-28T06:00:00Z","session_end_time":"2021-05-28T18:00:00Z","next_session_start_time":"2021-05-31T05:00:00Z","symbol":"GBP/CHF:AFX","SessionSource":"parser","RateSource":"parser","enabled":true,"category":"Forex","deals_opening_allowed":true,"friendly_name":"GBP/CHF","is_otc":false,"sparkline":null},{"id":123,"rate":0,"rate_longer_5m":0.78,"available":true,"session_start_time":"2021-05-28T06:00:00Z","session_end_time":"2021-05-28T18:00:00Z","next_session_start_time":"2021-05-31T04:00:00Z","symbol":"USD/NOK:AFX","SessionSource":"parser","RateSource":"parser","enabled":true,"category":"Forex","deals_opening_allowed":true,"friendly_name":"USD/NOK","is_otc":false,"sparkline":null},{"id":124,"rate":0,"rate_longer_5m":0.78,"available":true,"session_start_time":"2021-05-28T06:00:00Z","session_end_time":"2021-05-28T18:30:00Z","next_session_start_time":"2021-05-31T00:00:00Z","symbol":"AUD/JPY:AFX","SessionSource":"parser","RateSource":"parser","enabled":true,"category":"Forex","deals_opening_allowed":true,"friendly_name":"AUD/JPY","is_otc":false,"sparkline":null},{"id":289,"rate":0.55,"rate_longer_5m":0.44,"available":true,"session_start_time":"2021-05-25T10:10:00Z","session_end_time":"2021-05-30T23:59:00Z","next_session_start_time":"2021-06-01T10:10:00Z","symbol":"AMZN","SessionSource":"manual","RateSource":"manual","enabled":true,"category":"Stocks","deals_opening_allowed":true,"friendly_name":"Amazon","is_otc":false,"sparkline":null},{"id":141,"rate":0.75,"rate_longer_5m":0,"available":true,"session_start_time":"2021-05-28T06:00:00Z","session_end_time":"2021-05-28T18:30:00Z","next_session_start_time":"2021-05-31T00:00:00Z","symbol":"USD/JPY:AFX","SessionSource":"parser","RateSource":"parser","enabled":true,"category":"Forex","deals_opening_allowed":true,"friendly_name":"USD/JPY","is_otc":false,"sparkline":null},{"id":67,"rate":0,"rate_longer_5m":0,"available":false,"session_start_time":"2021-05-28T07:00:00Z","session_end_time":"2021-05-28T18:00:00Z","next_session_start_time":"2021-05-28T07:00:00Z","symbol":"AUD/CAD:AFX","SessionSource":"parser","RateSource":"parser","enabled":true,"category":"Forex","deals_opening_allowed":true,"friendly_name":"AUD/CAD","is_otc":false,"sparkline":null},{"id":291,"rate":0,"rate_longer_5m":0,"available":false,"session_start_time":"2021-05-28T13:33:00Z","session_end_time":"2021-05-28T18:30:00Z","next_session_start_time":"2021-05-28T13:33:00Z","symbol":"INTC","SessionSource":"parser","RateSource":"parser","enabled":true,"category":"Stocks","deals_opening_allowed":true,"friendly_name":"Intel","is_otc":false,"sparkline":null},{"id":294,"rate":0,"rate_longer_5m":0,"available":false,"session_start_time":"2021-05-28T13:33:00Z","session_end_time":"2021-05-28T18:30:00Z","next_session_start_time":"2021-05-28T13:33:00Z","symbol":"GOOG","SessionSource":"parser","RateSource":"parser","enabled":true,"category":"Stocks","deals_opening_allowed":true,"friendly_name":"Google","is_otc":false,"sparkline":null},{"id":292,"rate":0,"rate_longer_5m":0,"available":false,"session_start_time":"2021-05-28T13:33:00Z","session_end_time":"2021-05-28T18:30:00Z","next_session_start_time":"2021-05-28T13:33:00Z","symbol":"BIDU","SessionSource":"parser","RateSource":"parser","enabled":true,"category":"Stocks","deals_opening_allowed":true,"friendly_name":"Baidu","is_otc":false,"sparkline":null},{"id":285,"rate":0,"rate_longer_5m":0,"available":false,"session_start_time":"2021-05-28T13:33:00Z","session_end_time":"2021-05-28T18:30:00Z","next_session_start_time":"2021-05-28T13:33:00Z","symbol":"KO","SessionSource":"parser","RateSource":"parser","enabled":true,"category":"Stocks","deals_opening_allowed":true,"friendly_name":"Coca-Cola","is_otc":false,"sparkline":null},{"id":288,"rate":0,"rate_longer_5m":0,"available":false,"session_start_time":"2021-05-28T13:33:00Z","session_end_time":"2021-05-28T18:30:00Z","next_session_start_time":"2021-05-28T13:33:00Z","symbol":"AAPL","SessionSource":"parser","RateSource":"parser","enabled":true,"category":"Stocks","deals_opening_allowed":true,"friendly_name":"Apple","is_otc":false,"sparkline":null},{"id":293,"rate":0,"rate_longer_5m":0,"available":false,"session_start_time":"2021-05-28T13:33:00Z","session_end_time":"2021-05-28T18:30:00Z","next_session_start_time":"2021-05-28T13:33:00Z","symbol":"C","SessionSource":"parser","RateSource":"parser","enabled":true,"category":"Stocks","deals_opening_allowed":true,"friendly_name":"Citigroup","is_otc":false,"sparkline":null},{"id":222,"rate":0,"rate_longer_5m":0,"available":false,"session_start_time":"2021-05-28T07:00:00Z","session_end_time":"2021-05-28T18:30:00Z","next_session_start_time":"2021-05-28T07:00:00Z","symbol":"USD/CHF:AFX","SessionSource":"parser","RateSource":"parser","enabled":true,"category":"Forex","deals_opening_allowed":true,"friendly_name":"USD/CHF","is_otc":false,"sparkline":null},{"id":107,"rate":0,"rate_longer_5m":0,"available":false,"session_start_time":"2021-05-25T16:14:00Z","session_end_time":"2021-05-25T18:55:00Z","next_session_start_time":"2021-06-01T15:25:00Z","symbol":"GBP/USD:AFX","SessionSource":"parser","RateSource":"parser","enabled":true,"category":"Forex","deals_opening_allowed":true,"friendly_name":"GBP/USD","is_otc":false,"sparkline":null},{"id":295,"rate":0,"rate_longer_5m":0,"available":false,"session_start_time":"2021-05-28T13:33:00Z","session_end_time":"2021-05-28T18:30:00Z","next_session_start_time":"2021-05-28T13:33:00Z","symbol":"MCD","SessionSource":"parser","RateSource":"parser","enabled":true,"category":"Stocks","deals_opening_allowed":true,"friendly_name":"Mcdonald\'s","is_otc":false,"sparkline":null},{"id":254,"rate":0,"rate_longer_5m":0.78,"available":true,"session_start_time":"2021-05-28T06:00:00Z","session_end_time":"2021-05-28T18:30:00Z","next_session_start_time":"2021-05-31T05:00:00Z","symbol":"CAD/CHF:AFX","SessionSource":"parser","RateSource":"parser","enabled":true,"category":"Forex","deals_opening_allowed":true,"friendly_name":"CAD/CHF","is_otc":false,"sparkline":null},{"id":284,"rate":0,"rate_longer_5m":0,"available":false,"session_start_time":"2021-05-28T13:33:00Z","session_end_time":"2021-05-28T18:30:00Z","next_session_start_time":"2021-05-28T13:33:00Z","symbol":"MSFT","SessionSource":"parser","RateSource":"parser","enabled":true,"category":"Stocks","deals_opening_allowed":true,"friendly_name":"Microsoft","is_otc":false,"sparkline":null},{"id":236,"rate":0.76,"rate_longer_5m":0.72,"available":false,"session_start_time":"2021-05-28T06:00:00Z","session_end_time":"2021-05-28T18:30:00Z","next_session_start_time":"2021-05-31T00:00:00Z","symbol":"EUR/USD:AFX","SessionSource":"parser","RateSource":"parser","enabled":false,"category":"Forex","deals_opening_allowed":true,"friendly_name":"EUR/USD","is_otc":false,"sparkline":null},{"id":27,"rate":0,"rate_longer_5m":0,"available":false,"session_start_time":"2021-05-28T18:30:00Z","session_end_time":"2021-05-30T23:55:00Z","next_session_start_time":"2021-05-28T18:30:00Z","symbol":"GBP/USD:OTC","SessionSource":"parser","RateSource":"parser","enabled":true,"category":"Forex","deals_opening_allowed":true,"friendly_name":"GBP/USD:OTC","is_otc":true,"sparkline":null},{"id":298,"rate":0,"rate_longer_5m":0,"available":false,"session_start_time":"2021-05-28T13:33:00Z","session_end_time":"2021-05-28T18:30:00Z","next_session_start_time":"2021-05-28T13:33:00Z","symbol":"NKE","SessionSource":"parser","RateSource":"parser","enabled":true,"category":"Stocks","deals_opening_allowed":true,"friendly_name":"Nike","is_otc":false,"sparkline":null},{"id":28,"rate":0,"rate_longer_5m":0,"available":false,"session_start_time":"2021-05-25T16:14:00Z","session_end_time":"2021-05-25T18:55:00Z","next_session_start_time":"2021-06-01T15:25:00Z","symbol":"USD/CAD:OTC","SessionSource":"parser","RateSource":"parser","enabled":false,"category":"Forex","deals_opening_allowed":true,"friendly_name":"USD/CAD:OTC","is_otc":true,"sparkline":null},{"id":207,"rate":0,"rate_longer_5m":0.78,"available":true,"session_start_time":"2021-05-28T06:00:00Z","session_end_time":"2021-05-28T18:00:00Z","next_session_start_time":"2021-05-31T04:00:00Z","symbol":"AUD/CHF:AFX","SessionSource":"parser","RateSource":"parser","enabled":true,"category":"Forex","deals_opening_allowed":true,"friendly_name":"AUD/CHF","is_otc":false,"sparkline":null},{"id":148,"rate":0,"rate_longer_5m":0.78,"available":true,"session_start_time":"2021-05-28T06:00:00Z","session_end_time":"2021-05-28T18:30:00Z","next_session_start_time":"2021-05-31T05:00:00Z","symbol":"GBP/AUD:AFX","SessionSource":"parser","RateSource":"parser","enabled":true,"category":"Forex","deals_opening_allowed":true,"friendly_name":"GBP/AUD","is_otc":false,"sparkline":null},{"id":297,"rate":0,"rate_longer_5m":0,"available":false,"session_start_time":"2021-05-28T13:33:00Z","session_end_time":"2021-05-28T18:30:00Z","next_session_start_time":"2021-05-28T13:33:00Z","symbol":"JPM","SessionSource":"parser","RateSource":"parser","enabled":true,"category":"Stocks","deals_opening_allowed":true,"friendly_name":"JPMorgan Chase \u0026 Co.","is_otc":false,"sparkline":null},{"id":287,"rate":0,"rate_longer_5m":0,"available":false,"session_start_time":"2021-05-28T13:40:00Z","session_end_time":"2021-05-30T23:59:00Z","next_session_start_time":"2021-05-28T13:40:00Z","symbol":"MS","SessionSource":"manual","RateSource":"parser","enabled":true,"category":"Stocks","deals_opening_allowed":true,"friendly_name":"Morgan Stanley","is_otc":false,"sparkline":null},{"id":282,"rate":0,"rate_longer_5m":0,"available":false,"session_start_time":"2021-05-28T13:33:00Z","session_end_time":"2021-05-28T18:30:00Z","next_session_start_time":"2021-05-28T13:33:00Z","symbol":"TSLA","SessionSource":"parser","RateSource":"parser","enabled":true,"category":"Stocks","deals_opening_allowed":true,"friendly_name":"Tesla","is_otc":false,"sparkline":null},{"id":56,"rate":0,"rate_longer_5m":0.58,"available":true,"session_start_time":"2021-05-28T06:00:00Z","session_end_time":"2021-05-28T17:00:00Z","next_session_start_time":"2021-05-31T00:00:00Z","symbol":"AUD/USD:AFX","SessionSource":"parser","RateSource":"parser","enabled":true,"category":"Forex","deals_opening_allowed":true,"friendly_name":"AUD/USD","is_otc":false,"sparkline":null},{"id":283,"rate":0,"rate_longer_5m":0,"available":false,"session_start_time":"2021-05-28T13:33:00Z","session_end_time":"2021-05-28T18:30:00Z","next_session_start_time":"2021-05-28T13:33:00Z","symbol":"FB","SessionSource":"parser","RateSource":"parser","enabled":true,"category":"Stocks","deals_opening_allowed":true,"friendly_name":"Facebook","is_otc":false,"sparkline":null},{"id":290,"rate":0,"rate_longer_5m":0,"available":false,"session_start_time":"2021-05-28T13:33:00Z","session_end_time":"2021-05-28T18:30:00Z","next_session_start_time":"2021-05-28T13:33:00Z","symbol":"TWTR","SessionSource":"parser","RateSource":"parser","enabled":true,"category":"Stocks","deals_opening_allowed":true,"friendly_name":"Twitter","is_otc":false,"sparkline":null},{"id":81,"rate":0,"rate_longer_5m":0,"available":false,"session_start_time":"2021-05-28T06:00:00Z","session_end_time":"2021-05-28T16:00:00Z","next_session_start_time":"2021-05-31T06:00:00Z","symbol":"USD/CAD:AFX","SessionSource":"parser","RateSource":"parser","enabled":true,"category":"Forex","deals_opening_allowed":true,"friendly_name":"USD/CAD","is_otc":false,"sparkline":null},{"id":61,"rate":0.76,"rate_longer_5m":0.77,"available":true,"session_start_time":"2021-05-28T06:00:00Z","session_end_time":"2021-05-28T18:30:00Z","next_session_start_time":"2021-05-31T00:00:00Z","symbol":"EUR/JPY:AFX","SessionSource":"parser","RateSource":"parser","enabled":true,"category":"Forex","deals_opening_allowed":true,"friendly_name":"EUR/JPY","is_otc":false,"sparkline":null}]';
    for (var a in json.decode(jsonString)) {
      assets.add(Asset.fromJson(a));
    }
    return assets;
  }

}

